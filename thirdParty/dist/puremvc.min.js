!function(t){"use strict";var e,o,s,i,n,r,a,p,l,u,c,h,f,d,y,_;function m(t,e){this._notify=null,this._context=null,this.setNotifyMethod(t),this.setNotifyContext(e)}function v(){if(this._mediatorMap=null,this._observerMap=null,v._instance)throw Error(v.SINGLETON_MSG);(v._instance=this)._mediatorMap={},this._observerMap={},this.initializeView()}function M(){if(this._view=null,this._commandMap=null,M._instance)throw Error(r);(M._instance=this)._commandMap={},this.initializeController()}function g(){if(this._proxyMap=null,g._instance)throw Error(l);(g._instance=this)._proxyMap={},this.initializeModel()}function N(t,e,o){void 0===e&&(e=null),void 0===o&&(o=null),this._name=null,this._body=null,this._type=null,this._released=!1,this._name=t,this._body=e,this._type=o}function w(){if(this._model=null,this._view=null,this._controller=null,w._instance)throw Error(w.SINGLETON_MSG);(w._instance=this).initializeFacade()}function x(){this._facade=null,this._facade=y.Facade.getInstance()}e=G=G||{},m.prototype.getNotifyMethod=function(){return this._notify},m.prototype.setNotifyMethod=function(t){this._notify=t},m.prototype.getNotifyContext=function(){return this._context},m.prototype.setNotifyContext=function(t){this._context=t},m.prototype.notifyObserver=function(t,e,o){void 0===e&&(e=null),void 0===o&&(o=null),this.getNotifyMethod().call(this.getNotifyContext(),t,e,o)},m.prototype.compareNotifyContext=function(t){return t===this._context},o=m,e.Observer=o,s=G=G||{},v.prototype.initializeView=function(){},v.prototype.registerObserver=function(t,e){var o=this._observerMap[t];o?o.push(e):this._observerMap[t]=[e]},v.prototype.removeObserver=function(t,e){for(var o=this._observerMap[t],i=o.length;i--;){if(o[i].compareNotifyContext(e)){o.splice(i,1);break}}0==o.length&&delete this._observerMap[t]},v.prototype.notifyObservers=function(t){var e=t.getName(),o=t.getBody(),i=t.getType(),n=this._observerMap[e];if(n)for(var r=n.slice(0),s=r.length,a=0;a<s;a++){r[a].notifyObserver(e,o,i)}t.dispose()},v.prototype.registerMediator=function(t){var e=t.getMediatorName();if(!this._mediatorMap[e]){var o=(this._mediatorMap[e]=t).listNotificationInterests(),i=o.length;if(0<i)for(var n=new s.Observer(t.handleNotification,t),r=0;r<i;r++)this.registerObserver(o[r],n);t.onRegister()}},v.prototype.retrieveMediator=function(t){return this._mediatorMap[t]||null},v.prototype.removeMediator=function(t){var e=this._mediatorMap[t];if(!e)return null;for(var o=e.listNotificationInterests(),i=o.length;i--;)this.removeObserver(o[i],e);return delete this._mediatorMap[t],e.onRemove(),e},v.prototype.hasMediator=function(t){return null!=this._mediatorMap[t]},v.getInstance=function(){return v._instance||(v._instance=new v),v._instance},v.SINGLETON_MSG="View singleton already constructed!",i=v,s.View=i,n=G=G||{},r="Controller singleton already constructed!",M.prototype.initializeController=function(){this._view=n.View.getInstance()},M.prototype.executeCommand=function(t){var e=this._commandMap[t.getName()];e&&(new e).execute(t)},M.prototype.registerCommand=function(t,e){this._commandMap[t]||this._view&&this._view.registerObserver(t,new n.Observer(this.executeCommand,this)),this._commandMap[t]=e},M.prototype.hasCommand=function(t){return null!=this._commandMap[t]},M.prototype.removeCommand=function(t){this.hasCommand(t)&&(this._view&&this._view.removeObserver(t,this),delete this._commandMap[t])},M.getInstance=function(){return M._instance||(M._instance=new M),M._instance},a=M,n.Controller=a,p=G=G||{},l="Model singleton already constructed!",g.prototype.initializeModel=function(){},g.prototype.registerProxy=function(t){(this._proxyMap[t.getProxyName()]=t).onRegister()},g.prototype.removeProxy=function(t){var e=this._proxyMap[t];return e&&(delete this._proxyMap[t],e.onRemove()),e},g.prototype.retrieveProxy=function(t){return this._proxyMap[t]||null},g.prototype.hasProxy=function(t){return null!=this._proxyMap[t]},g.getInstance=function(){return g._instance||(g._instance=new g),g._instance},u=g,p.Model=u,c=G=G||{},N.allocate=function(t,e,o){void 0===e&&(e=null),void 0===o&&(o=null);var i=null;return 0<this._notificationPool.length?((i=this._notificationPool.pop())._name=t,i._body=e,i._type=o):i=new N(t,e,o),i._released=!1,i},N.prototype.getName=function(){return this._name},N.prototype.setBody=function(t){this._body=t},N.prototype.getBody=function(){return this._body},N.prototype.setType=function(t){this._type=t},N.prototype.getType=function(){return this._type},N.prototype.toString=function(){var t="Notification Name: "+this.getName();return t+="\nBody:"+(null==this.getBody()?"null":this.getBody().toString()),t+="\nType:"+(null==this.getType()?"null":this.getType())},N.prototype.dispose=function(){var t;this._released||(this._released=!0,this._name=null,this._body=null,this._type=null,(t=N._notificationPool)[t.length]=this)},N._notificationPool=[],h=N,c.Notification=h,f=G=G||{},w.prototype.initializeFacade=function(){this.initializeModel(),this.initializeController(),this.initializeView()},w.prototype.initializeModel=function(){this._model||(this._model=f.Model.getInstance())},w.prototype.initializeController=function(){this._controller||(this._controller=f.Controller.getInstance())},w.prototype.initializeView=function(){this._view||(this._view=f.View.getInstance())},w.prototype.registerCommand=function(t,e){this._controller.registerCommand(t,e)},w.prototype.removeCommand=function(t){this._controller.removeCommand(t)},w.prototype.hasCommand=function(t){return this._controller.hasCommand(t)},w.prototype.registerProxy=function(t){this._model.registerProxy(t)},w.prototype.retrieveProxy=function(t){return this._model.retrieveProxy(t)},w.prototype.removeProxy=function(t){var e;return this._model&&(e=this._model.removeProxy(t)),e},w.prototype.hasProxy=function(t){return this._model.hasProxy(t)},w.prototype.registerMediator=function(t){this._view&&this._view.registerMediator(t)},w.prototype.retrieveMediator=function(t){return this._view.retrieveMediator(t)},w.prototype.removeMediator=function(t){var e;return this._view&&(e=this._view.removeMediator(t)),e},w.prototype.hasMediator=function(t){return this._view.hasMediator(t)},w.prototype.notifyObservers=function(t){this._view&&this._view.notifyObservers(t)},w.prototype.sendNotification=function(t,e,o){void 0===e&&(e=null),void 0===o&&(o=null),this.notifyObservers(f.Notification.allocate(t,e,o))},w.getInstance=function(){return w._instance||(w._instance=new w),w._instance},w.SINGLETON_MSG="Facade singleton already constructed!",d=w,f.Facade=d,y=G=G||{},x.prototype.sendNotification=function(t,e,o){void 0===e&&(e=null),void 0===o&&(o=null),this._facade.sendNotification(t,e,o)},_=x,y.Notifier=_;var C,b,O,P,z,I,E,S,T,V,G,R,B,A,F=this&&this.__extends||(C=function(t,e){return(C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}C(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});function L(){var t=O.call(this)||this;return t._subCommands=null,t._subCommands=[],t.initializeMacroCommand(),t}function j(){return null!==I&&I.apply(this,arguments)||this}function k(t,e){void 0===e&&(e=null);var o=T.call(this)||this;return o._mediatorName=null,o._viewComponent=null,o._mediatorName=null!=t?t:k.NAME,o._viewComponent=e,o}function q(t){var e=B.call(this)||this;return e._proxyName=null,e._proxyName=null!=t?t:q.NAME,e}b=G=G||{},O=b.Notifier,F(L,O),L.prototype.initializeMacroCommand=function(){},L.prototype.addSubCommand=function(t){this._subCommands.push(t)},L.prototype.execute=function(t){for(var e=this._subCommands.slice(0),o=this._subCommands.length,i=0;i<o;i++){(new e[i]).execute(t)}this._subCommands.splice(0)},P=L,b.MacroCommand=P,z=G=G||{},I=z.Notifier,F(j,I),j.prototype.execute=function(t){},E=j,z.SimpleCommand=E,S=G=G||{},T=S.Notifier,F(k,T),k.prototype.getMediatorName=function(){return this._mediatorName},k.prototype.getViewComponent=function(){return this._viewComponent},k.prototype.setViewComponent=function(t){this._viewComponent=t},k.prototype.listNotificationInterests=function(){return[]},k.prototype.handleNotification=function(t,e,o){},k.prototype.onRegister=function(){},k.prototype.onRemove=function(){},k.NAME="Mediator",V=k,S.Mediator=V,R=G=G||{},B=R.Notifier,F(q,B),q.prototype.getProxyName=function(){return this._proxyName},q.prototype.onRegister=function(){},q.prototype.onRemove=function(){},q.NAME="Proxy",A=q,R.Proxy=A,t.module[t.moduleName]=G}(function(){var t,e="undefined"!=typeof window&&window?(t=window,"puremvc"):"undefined"!=typeof module&&module?(t=module,"exports"):(t={},"puremvc");return{module:t,moduleName:e}}());